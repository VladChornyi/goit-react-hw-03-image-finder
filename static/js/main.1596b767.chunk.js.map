{"version":3,"sources":["utils/serviceAPI.js","components/modal/Modal.jsx","components/imageGallery/ImageGallery.jsx","components/searchbar/Searchbar.jsx","components/App.jsx","index.js"],"names":["getImagesApi","query","page","perPage","fetch","then","res","json","response","hits","Modal","state","isLoading","handleEscape","e","code","props","closeModal","onOverlayClick","target","currentTarget","window","addEventListener","this","document","querySelector","style","overflow","removeEventListener","onClick","className","src","largeImageURL","alt","Component","ImageGallery","images","loading","largeImgURL","isOpenModal","getImages","setState","pictures","prev","length","totalHits","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleLoadMore","toggleModal","setLargeImg","prevProps","prevState","type","color","height","width","timeout","map","image","webformatURL","tags","id","Searchbar","handleQueryChange","event","value","toLowerCase","handleSubmit","trim","preventDefault","toast","error","onSubmit","autoComplete","autoFocus","placeholder","onChange","App","key","handleFormSubmit","autoClose","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1596b767.chunk.js","sourcesContent":["const KEY = '22773171-6fe03cddc33c3049d7faab277';\r\nexport const getImagesApi = ({ query, page = 1, perPage = 12 }) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`,\r\n  )\r\n    .then(res => res.json())\r\n    .then(response => {\r\n      return response.hits;\r\n    });\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nclass Modal extends Component {\r\n  state = {\r\n    isLoading: false,\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleEscape);\r\n    const body = document.querySelector('body');\r\n    body.style.overflow = 'hidden';\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleEscape);\r\n    const body = document.querySelector('body');\r\n    body.style.overflow = 'auto';\r\n  }\r\n\r\n  handleEscape = e => e.code === 'Escape' && this.props.closeModal();\r\n\r\n  onOverlayClick = ({ target, currentTarget }) => {\r\n    target === currentTarget && this.props.closeModal();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div onClick={this.onOverlayClick} className=\"Overlay\">\r\n        <div className=\"Modal\">\r\n          <img src={this.props.largeImageURL} alt=\"\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport { getImagesApi } from '../../utils/serviceAPI';\r\nimport Modal from '../modal/Modal';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    page: 1,\r\n    perPage: 12,\r\n    images: [],\r\n    loading: false,\r\n    largeImgURL: '',\r\n    isOpenModal: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.query !== this.props.query) {\r\n      this.getImages({ query: this.props.query });\r\n      this.setState({ page: 1, images: [] });\r\n    }\r\n    if (prevState.page !== this.state.page && this.state.page !== 1) {\r\n      this.getImages({ query: this.props.query, page: this.state.page });\r\n    }\r\n  }\r\n  getImages = ({ page, query }) => {\r\n    this.setState({ loading: true });\r\n    getImagesApi({ query, page })\r\n      .then(pictures =>\r\n        this.setState(prev => ({\r\n          images: [...prev.images, ...pictures],\r\n          length: pictures.totalHits,\r\n        })),\r\n      )\r\n      .finally(() => {\r\n        this.setState({ loading: false });\r\n        if (page > 1) {\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  handleLoadMore = () => {\r\n    this.setState(prev => ({ page: prev.page + 1 }));\r\n  };\r\n  toggleModal = () => {\r\n    this.setState(prev => ({ isOpenModal: !prev.isOpenModal }));\r\n  };\r\n  setLargeImg = largeImgURL => {\r\n    this.setState({ largeImgURL });\r\n  };\r\n  render() {\r\n    const { loading, images, isOpenModal, largeImgURL } = this.state;\r\n    return (\r\n      <>\r\n        {loading && (\r\n          <Loader type=\"BallTriangle\" color=\"#00BFFF\" height={80} width={80} timeout={3000} />\r\n        )}\r\n        {/* {!length && <h1>Введите корректные данные запроса</h1>} */}\r\n        {images.length > 0 && (\r\n          <ul className=\"ImageGallery\">\r\n            {images.map(image => (\r\n              <li key={image.id} onClick={this.toggleModal} className=\"ImageGalleryItem\">\r\n                <img\r\n                  src={image.webformatURL}\r\n                  alt={image.tags}\r\n                  onClick={() => this.setLargeImg(image.largeImageURL)}\r\n                  className=\"ImageGalleryItem-image\"\r\n                />\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n        {isOpenModal && <Modal largeImageURL={largeImgURL} closeModal={this.toggleModal} />}\r\n        {images.length > 1 && (\r\n          <button className=\"Button\" type=\"button\" onClick={this.handleLoadMore}>\r\n            Load more\r\n          </button>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n  handleQueryChange = event => {\r\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\r\n  };\r\n  handleSubmit = event => {\r\n    if (this.state.query.trim() === '') {\r\n      event.preventDefault();\r\n      toast.error('Введите данные для запроса');\r\n      return;\r\n    }\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.query);\r\n  };\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleQueryChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ImageGallery from './imageGallery/ImageGallery';\nimport Searchbar from './searchbar/Searchbar';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass App extends Component {\n  state = {\n    key: '22773171-6fe03cddc33c3049d7faab277',\n    query: '',\n  };\n  handleFormSubmit = query => {\n    this.setState({ query });\n  };\n\n  render() {\n    return (\n      <>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery query={this.state.query} />\n        <ToastContainer autoClose={3000} />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}