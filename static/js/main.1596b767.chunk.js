(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(7),o=a.n(r),c=(a(16),a(3)),i=a(4),s=a(6),l=a(5),u=a(8),h=(a(17),a(10)),g=a(11),d=a.n(g),m=function(e){var t=e.query,a=e.page,n=void 0===a?1:a,r=e.perPage,o=void 0===r?12:r;return fetch("https://pixabay.com/api/?q=".concat(t,"&page=").concat(n,"&key=").concat("22773171-6fe03cddc33c3049d7faab277","&image_type=photo&orientation=horizontal&per_page=").concat(o)).then((function(e){return e.json()})).then((function(e){return e.hits}))},p=a(1),b=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1},e.handleEscape=function(t){return"Escape"===t.code&&e.props.closeModal()},e.onOverlayClick=function(t){t.target===t.currentTarget&&e.props.closeModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape),document.querySelector("body").style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape),document.querySelector("body").style.overflow="auto"}},{key:"render",value:function(){return Object(p.jsx)("div",{onClick:this.onOverlayClick,className:"Overlay",children:Object(p.jsx)("div",{className:"Modal",children:Object(p.jsx)("img",{src:this.props.largeImageURL,alt:""})})})}}]),a}(n.Component),j=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={page:1,perPage:12,images:[],loading:!1,largeImgURL:"",isOpenModal:!1},e.getImages=function(t){var a=t.page,n=t.query;e.setState({loading:!0}),m({query:n,page:a}).then((function(t){return e.setState((function(e){return{images:[].concat(Object(h.a)(e.images),Object(h.a)(t)),length:t.totalHits}}))})).finally((function(){e.setState({loading:!1}),a>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.handleLoadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.toggleModal=function(){e.setState((function(e){return{isOpenModal:!e.isOpenModal}}))},e.setLargeImg=function(t){e.setState({largeImgURL:t})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.query!==this.props.query&&(this.getImages({query:this.props.query}),this.setState({page:1,images:[]})),t.page!==this.state.page&&1!==this.state.page&&this.getImages({query:this.props.query,page:this.state.page})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.images,r=t.isOpenModal,o=t.largeImgURL;return Object(p.jsxs)(p.Fragment,{children:[a&&Object(p.jsx)(d.a,{type:"BallTriangle",color:"#00BFFF",height:80,width:80,timeout:3e3}),n.length>0&&Object(p.jsx)("ul",{className:"ImageGallery",children:n.map((function(t){return Object(p.jsx)("li",{onClick:e.toggleModal,className:"ImageGalleryItem",children:Object(p.jsx)("img",{src:t.webformatURL,alt:t.tags,onClick:function(){return e.setLargeImg(t.largeImageURL)},className:"ImageGalleryItem-image"})},t.id)}))}),r&&Object(p.jsx)(b,{largeImageURL:o,closeModal:this.toggleModal}),n.length>1&&Object(p.jsx)("button",{className:"Button",type:"button",onClick:this.handleLoadMore,children:"Load more"})]})}}]),a}(n.Component),y=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleQueryChange=function(t){e.setState({query:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){if(""===e.state.query.trim())return t.preventDefault(),void u.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430");t.preventDefault(),e.props.onSubmit(e.state.query)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"Searchbar",children:Object(p.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query,onChange:this.handleQueryChange})]})})}}]),a}(n.Component),f=(a(39),function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={key:"22773171-6fe03cddc33c3049d7faab277",query:""},e.handleFormSubmit=function(t){e.setState({query:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{onSubmit:this.handleFormSubmit}),Object(p.jsx)(j,{query:this.state.query}),Object(p.jsx)(u.a,{autoClose:3e3})]})}}]),a}(n.Component));o.a.render(Object(p.jsx)(f,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1596b767.chunk.js.map